// Snowflake REST APIs を使用するときにサーバーに対して認証する方法
リクエストを送信する場合、リクエストには以下のいずれかを使用する認証情報が含まれている必要があります。

キーペア認証の使用

OAuth の使用

※[キーペア認証の使用]こちらを使用


ステップ①：キーペア認証を設定する
このプロセスの一環として、次を実行する必要があります。

1.公開キーと秘密キーのペアを生成します。生成された秘密キーはファイル内にある必要があります（例: rsa_key.p8 という名前）。

2.公開キーをSnowflakeユーザーに割り当てます。ユーザーにキーを割り当てたら、 DESCRIBE USER コマンドを実行します。出力では、 RSA_PUBLIC_KEY_FP プロパティは、ユーザーに割り当てられた公開キーのフィンガープリントに設定する必要があります。


【1.2のために秘密鍵・公開鍵の設定方法は以下】

※秘密キーを生成
↓
秘密キーは、暗号化バージョンまたは非暗号化バージョンのいずれかを生成できます。
（非暗号化バージョンを生成）
openssl genrsa 2048 | openssl pkcs8 -topk8 -inform PEM -out rsa_key.p8 -nocrypt

（暗号化バージョンを生成）
openssl genrsa 2048 | openssl pkcs8 -topk8 -v2 des3 -inform PEM -out rsa_key.p8


出力結果イメージ：
-----BEGIN ENCRYPTED PRIVATE KEY-----
MIIE6T...
-----END ENCRYPTED PRIVATE KEY-----


※公開キーを生成
次のコマンドでは、秘密キーが暗号化され、 rsa_key.p8 という名前のファイルに含まれていると仮定

openssl rsa -in rsa_key.p8 -pubout -out rsa_key.pub


出力結果イメージ：
-----BEGIN PUBLIC KEY-----
MIIBIj...
-----END PUBLIC KEY-----


※Snowflakeユーザーに公開キーを割り当てる

ALTER USER example_user SET RSA_PUBLIC_KEY='MIIBIjANBgkqh...';





