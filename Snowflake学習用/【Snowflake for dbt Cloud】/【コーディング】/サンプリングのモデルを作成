// Snowflakeã§å®Ÿè¡Œã—ã¦ã„ãŸã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ãƒ“ãƒ¥ãƒ¼ä½œæˆï¼‹ã‚«ãƒ†ã‚´ãƒªå‰²åˆç®—å‡ºã‚’ã€dbtãƒ¢ãƒ‡ãƒ«ï¼ˆSQLãƒ•ã‚¡ã‚¤ãƒ«ï¼‰ã¨ã—ã¦å®šç¾©
âœ… ã‚´ãƒ¼ãƒ«ï¼šdbtã§2ã¤ã®ãƒ¢ãƒ‡ãƒ«ã‚’ä½œæˆ
ãƒ¢ãƒ‡ãƒ«å	å†…å®¹
address_sample	ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã®ãƒ“ãƒ¥ãƒ¼ï¼ˆCUSTOMER_ADDRESSã‹ã‚‰ç´„1%ã‚’æŠ½å‡ºï¼‰
location_type_distribution	ä¸Šè¨˜ã‚µãƒ³ãƒ—ãƒ«ã‹ã‚‰ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒ—ã”ã¨ã®å‰²åˆã‚’ç®—å‡º

ğŸ§© ãƒ¢ãƒ‡ãƒ«â‘ ï¼šmodels/address_sample.sql
-- models/address_sample.sql
-- ç´„1%ã‚’ãƒ©ãƒ³ãƒ€ãƒ æŠ½å‡ºã™ã‚‹ã‚µãƒ³ãƒ—ãƒ«ãƒ“ãƒ¥ãƒ¼ï¼ˆå†ç¾æ€§ã®ãŸã‚ã«SEEDä½¿ç”¨ï¼‰

SELECT *
FROM SNOWFLAKE_SAMPLEDATA.TPCDS_SF100TCL.CUSTOMER_ADDRESS
SAMPLE ROW (1) SEED (27)
ğŸ’¡ ã“ã®ãƒ¢ãƒ‡ãƒ«ã¯ view ã¨ã—ã¦ãƒãƒ†ãƒªã‚¢ãƒ©ã‚¤ã‚ºã™ã‚‹ã®ãŒãŠã™ã™ã‚ã§ã™ï¼ˆdbt_project.yml ã¾ãŸã¯ config ã§æŒ‡å®šï¼‰

--configã§å®Ÿè¡Œã™ã‚‹ãªã‚‰
{{ config(
    materialized = 'view'
) }}

ğŸ§® ãƒ¢ãƒ‡ãƒ«â‘¡ï¼šmodels/location_type_distribution.sql

-- models/location_type_distribution.sql
-- ã‚µãƒ³ãƒ—ãƒ«ã‹ã‚‰ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒ—ã”ã¨ã®å‰²åˆã‚’ç®—å‡º

WITH base AS (
    SELECT *
    FROM {{ ref('address_sample') }}
),

-- å®Ÿã‚µãƒ³ãƒ—ãƒ«ä»¶æ•°ã‚’å–å¾—ï¼ˆæ­£ç¢ºãªæ¯”ç‡è¨ˆç®—ç”¨ï¼‰
sample_count AS (
    SELECT COUNT(*) AS total_rows
    FROM base
)

SELECT
    base.ca_location_type,
    COUNT(*)::FLOAT / sc.total_rows * 100 AS location_type_percentã€€ï¼ƒå®šæ•°ï¼ˆtotal_rowsï¼‰ã‚’å…¨è¡Œã«ä»˜ä¸ã—ãŸ
FROM base
CROSS JOIN sample_count sc
GROUP BY base.ca_location_type, sc.total_rows
âœ… ref('address_sample') ã«ã‚ˆã‚Šã€ãƒ¢ãƒ‡ãƒ«é–“ä¾å­˜é–¢ä¿‚ãŒè‡ªå‹•çš„ã«ç®¡ç†ã•ã‚Œã¾ã™
âœ… sample_count ã‚’ä½¿ã†ã“ã¨ã§ã€ã‚µãƒ³ãƒ—ãƒ«è¡Œæ•°ã«åŸºã¥ã„ãŸæ­£ç¢ºãªå‰²åˆã‚’ç®—å‡ºã§ãã¾ã™

âš™ï¸ dbt_project.yml ã§ã®ãƒãƒ†ãƒªã‚¢ãƒ©ã‚¤ã‚ºè¨­å®šï¼ˆä»»æ„ï¼‰

models:
  your_project_name:
    materialized: view
ã‚‚ã—ãã¯å€‹åˆ¥ã«ãƒ¢ãƒ‡ãƒ«å†…ã§æŒ‡å®šï¼š


-- ä¸Šéƒ¨ã«è¿½åŠ ï¼ˆä¾‹ï¼šaddress_sample.sqlã®å†’é ­ï¼‰
{{ config(materialized='view') }}
ğŸš€ å®Ÿè¡Œæ–¹æ³•ï¼ˆdbt CLI or Cloudï¼‰

dbt run --select address_sample location_type_distribution
âœ… ã¾ã¨ã‚
ãƒ¢ãƒ‡ãƒ«å	å‡¦ç†å†…å®¹
address_sample	ã‚µãƒ³ãƒ—ãƒ«ãƒ“ãƒ¥ãƒ¼ï¼ˆSnowflakeã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’å…ƒã«1%æŠ½å‡ºï¼‰
location_type_distribution	ã‚µãƒ³ãƒ—ãƒ«ã«ãŠã‘ã‚‹ CA_LOCATION_TYPE ã®ã‚«ãƒ†ã‚´ãƒªå‰²åˆã‚’è¨ˆç®—


ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼
ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼

dbt ãƒ¢ãƒ‡ãƒ«ï¼ˆaddress_sample ã¨ location_type_distributionï¼‰ã‚’å®Ÿè¡Œã—ãŸçµæœã€å¾—ã‚‰ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ã«ãªã‚Šã¾ã™ã€‚

âœ… ãƒ¢ãƒ‡ãƒ«â‘ ï¼šaddress_sample ã®çµæœï¼ˆã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ï¼‰
ã“ã®ãƒ“ãƒ¥ãƒ¼ã¯ã€SNOWFLAKE_SAMPLEDATA.TPCDS_SF100TCL.CUSTOMER_ADDRESS ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰ ç´„1%ã‚’ãƒ©ãƒ³ãƒ€ãƒ æŠ½å‡ºï¼ˆå†ç¾æ€§ã‚ã‚Šï¼‰ ã—ãŸã‚‚ã®ã§ã™ã€‚

ğŸ”¸ä¾‹ï¼ˆã‚«ãƒ©ãƒ æŠœç²‹ï¼‰ï¼š

CA_ADDRESS_ID	CA_LOCATION_TYPE	CA_CITY	CA_STATE	...
1443	residence	Los Angeles	CA	...
2539	business	New York	NY	...
3341	residence	Dallas	TX	...
4223	residence	Seattle	WA	...
5710	business	San Francisco	CA	...

ã‚µãƒ³ãƒ—ãƒ«æ•°ï¼šç´„100,000ä»¶ä¸­ â†’ 1,000ä»¶ç¨‹åº¦ï¼ˆç´„1%ï¼‰

SEEDæŒ‡å®šã«ã‚ˆã‚Šã€æ¯å›åŒã˜ãƒ©ãƒ³ãƒ€ãƒ ã‚µãƒ³ãƒ—ãƒ«ã‚’å¾—ã‚‰ã‚Œã‚‹

âœ… ãƒ¢ãƒ‡ãƒ«â‘¡ï¼šlocation_type_distribution ã®çµæœï¼ˆé›†ç´„ã•ã‚ŒãŸå‰²åˆï¼‰
ã“ã®ãƒ¢ãƒ‡ãƒ«ã¯ã€address_sample å†…ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã£ã¦ã€CA_LOCATION_TYPE ã”ã¨ã®å‡ºç¾å‰²åˆã‚’è¨ˆç®—ã—ã¾ã™ã€‚

ğŸ”¹æƒ³å®šã•ã‚Œã‚‹çµæœï¼š

CA_LOCATION_TYPE	LOCATION_TYPE_PERCENT
residence	73.8
business	24.6
rural	1.6

å„ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒ—ï¼ˆä¾‹ãˆã° residence, business, ruralï¼‰ã«ã¤ã„ã¦ã€

ã‚µãƒ³ãƒ—ãƒ«å…¨ä½“ã«å¯¾ã™ã‚‹**å‡ºç¾å‰²åˆï¼ˆï¼…ï¼‰**ã‚’è¡¨ç¤º

åˆ†æ¯ã¯å®Ÿã‚µãƒ³ãƒ—ãƒ«ä»¶æ•°ï¼ˆä¾‹ãˆã° 1,000ä»¶ï¼‰ã§æ­£ç¢ºã«ç®—å‡ºã•ã‚Œã‚‹

ğŸ’¡ æƒ³å®šç”¨é€”
å¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã‚ãšã€è»½é‡ã‚µãƒ³ãƒ—ãƒ«ã§æ§‹é€ ã‚„åˆ†å¸ƒã‚’ç†è§£ã™ã‚‹

æœ¬ç•ªãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å‚ç…§ã›ãšã«ã€æ¤œè¨¼ãƒ»åˆ†æãƒ»ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è©¦ä½œ

SEEDã«ã‚ˆã‚Šå†ç¾æ€§ã®ã‚ã‚‹ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿åˆ†æ

ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼
ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼

dbt test ã®è¨­å®šæ–¹æ³•
A. NOT NULL ãƒ†ã‚¹ãƒˆï¼ˆca_location_type ãŒå¿…ãšå­˜åœ¨ã™ã‚‹ã“ã¨ã‚’ä¿è¨¼ï¼‰

# tests/schema.yml

version: 2

models:
  - name: address_sample
    description: "1% sampled view of CUSTOMER_ADDRESS"
    columns:
      - name: ca_location_type
        tests:
          - not_null
B. expected_values ãƒ†ã‚¹ãƒˆï¼ˆca_location_type ãŒç‰¹å®šã®å€¤ã®ã¿ã‚’æŒã¤ï¼‰

# tests/schema.yml ï¼ˆä¸Šã®ç¶šãï¼‰

      - name: ca_location_type
        tests:
          - accepted_values:
              values: ['residence', 'business', 'rural']
âœ… ã“ã®ã‚ˆã†ã«ã€NOT NULL ã‚„ accepted_values ãƒ†ã‚¹ãƒˆã¯ã€åˆ—ã®å¦¥å½“æ€§ãƒã‚§ãƒƒã‚¯ã«ä½¿ãˆã¾ã™ã€‚
dbt test å®Ÿè¡Œã§è‡ªå‹•çš„ã«æ¤œè¨¼ã•ã‚Œã¾ã™ã€‚

ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼
ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼
dbt test ã«ã‚ˆã‚‹åˆ—ã®å“è³ªãƒã‚§ãƒƒã‚¯

vars ã«ã‚ˆã‚‹ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ç‡ã¨ SEED ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–

ç’°å¢ƒï¼ˆdev/staging/prodï¼‰ã”ã¨ã® vars åˆ‡ã‚Šæ›¿ãˆ

dbt docs ã«ã‚ˆã‚‹ãƒ¢ãƒ‡ãƒ«ãƒ»å¤‰æ•°ãƒ»ãƒ†ã‚¹ãƒˆã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–

ğŸ“¦ 1. ãƒ†ã‚¹ãƒˆå®šç¾©ï¼ˆschema.ymlï¼‰

# models/schema.yml

version: 2

models:
  - name: address_sample
    description: "1% sampled view of the CUSTOMER_ADDRESS table"
    columns:
      - name: ca_location_type
        description: "Location type of the customer address"
        tests:
          - not_null
          - accepted_values:
              values: ['residence', 'business', 'rural']
ğŸ”§ 2. dbt_project.yml ã«å¤‰æ•°ï¼ˆvarsï¼‰ã‚’å®šç¾©

# dbt_project.yml

name: sample_project
version: '1.0'
config-version: 2

profile: sample_project

# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¤‰æ•°ï¼ˆã©ã®ç’°å¢ƒã§ã‚‚ä½¿ãˆã‚‹ï¼‰
vars:
  sampling_percentage: 1
  sampling_seed: 27

models:
  sample_project:
    +materialized: view
ğŸ—ï¸ 3. ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆJinjaã§å¤‰æ•°ä½¿ç”¨ï¼‰

-- models/address_sample.sql

SELECT *
FROM SNOWFLAKE_SAMPLEDATA.TPCDS_SF100TCL.CUSTOMER_ADDRESS
SAMPLE ROW ({{ var('sampling_percentage') }}) SEED ({{ var('sampling_seed') }})
ğŸ§ª 4. ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ

# å…¨ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
dbt test
ğŸš€ 5. å®Ÿè¡Œæ™‚ã« vars ã‚’ä¸Šæ›¸ãï¼ˆä¾‹ï¼š5% æŠ½å‡ºã«å¤‰æ›´ï¼‰

dbt run --select address_sample --vars '{"sampling_percentage": 5, "sampling_seed": 123}'
ğŸŒ 6. ç’°å¢ƒï¼ˆtargetï¼‰ã”ã¨ã® vars åˆ‡ã‚Šæ›¿ãˆï¼ˆprofiles.ymlï¼‰

# ~/.dbt/profiles.yml

sample_project:
  target: dev
  outputs:
    dev:
      type: snowflake
      account: your_account_id
      user: your_user
      password: your_password
      role: your_role
      database: your_dev_db
      warehouse: your_warehouse
      schema: dev_schema
      threads: 4
      vars:
        sampling_percentage: 1
        sampling_seed: 27

    staging:
      type: snowflake
      account: your_account_id
      user: your_user
      password: your_password
      role: your_role
      database: your_staging_db
      warehouse: your_warehouse
      schema: staging_schema
      threads: 4
      vars:
        sampling_percentage: 10
        sampling_seed: 42

    prod:
      type: snowflake
      account: your_account_id
      user: your_user
      password: your_password
      role: your_role
      database: your_prod_db
      warehouse: your_warehouse
      schema: prod_schema
      threads: 4
      vars:
        sampling_percentage: 100
        sampling_seed: 1


devï¼šè»½é‡ãƒ†ã‚¹ãƒˆ

stagingï¼šæœ¬ç•ªã«è¿‘ã„ç¢ºèªç”¨

prodï¼šå…¨ä»¶å®Ÿè¡Œï¼ˆæœ¬ç•ªï¼‰

ğŸ“˜ 7. dbt docs ã«ã‚ˆã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆã¨ç¢ºèª

# ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆã¨é–²è¦§
dbt docs generate
dbt docs serve
ãƒ¢ãƒ‡ãƒ«ã®èª¬æ˜ã€åˆ—ã€ãƒ†ã‚¹ãƒˆå†…å®¹ã€å¤‰æ•°ã‚’ã™ã¹ã¦è‡ªå‹•ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–

Web UIã§å‚ç…§ãƒ»æ¤œç´¢å¯èƒ½ï¼

âœ… æœ€çµ‚ã¾ã¨ã‚ï¼šã“ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã§ã§ãã‚‹ã“ã¨
æ©Ÿèƒ½	ãƒ¡ãƒªãƒƒãƒˆ
ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ãƒ¢ãƒ‡ãƒ«ã®Jinjaå¤‰æ•°åŒ–	æŸ”è»Ÿãƒ»å†ç¾æ€§ãƒ»ç°¡æ½”
ãƒ†ã‚¹ãƒˆ (not_null, accepted_values)	å“è³ªä¿è¨¼ã€è‡ªå‹•ãƒã‚§ãƒƒã‚¯
ç’°å¢ƒåˆ¥ vars åˆ‡ã‚Šæ›¿ãˆ	å®Ÿè¡Œç’°å¢ƒã«å¿œã˜ãŸè¨­å®šã®æœ€é©åŒ–
ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè‡ªå‹•ç”Ÿæˆ	ãƒãƒ¼ãƒ å…±æœ‰ã€ãƒ‡ãƒ¼ã‚¿ã‚«ã‚¿ãƒ­ã‚°ä»£ã‚ã‚Šã«ä½¿ãˆã‚‹

ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼
ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼

ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ ZIPåŒ– ã—ã¦é…å¸ƒ
ğŸ”§ ã‚¹ãƒ†ãƒƒãƒ—ï¼š
dbt ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’1ã¤ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¾ã¨ã‚ã‚‹ï¼ˆä¾‹ï¼šdbt_sampling_projectï¼‰

pgsql

dbt_sampling_project/
â”œâ”€â”€ dbt_project.yml
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ address_sample.sql
â”‚   â””â”€â”€ location_type_distribution.sql
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ schema.yml
â”œâ”€â”€ macros/ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
â”œâ”€â”€ target/ï¼ˆé™¤å¤–ã—ã¦OKï¼‰
â””â”€â”€ profiles.ymlï¼ˆã¾ãŸã¯ README ã§æ¡ˆå†…ï¼‰
.zip ã«åœ§ç¸®ã™ã‚‹ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«åä¾‹ï¼šdbt_sampling_template.zipï¼‰

bash

zip -r dbt_sampling_template.zip dbt_sampling_project
å…±æœ‰æ–¹æ³•ï¼š

ãƒ¡ãƒ¼ãƒ«ã‚„ãƒãƒ£ãƒƒãƒˆã§é…å¸ƒ

Google Drive, Dropbox, Box ãªã©ã§å…±æœ‰

ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼
ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼
æ–¹æ³•â‘¡ï¼šGitHub ã§ç®¡ç†ãƒ»å…±æœ‰ï¼ˆãŠã™ã™ã‚ï¼‰
ğŸ”§ ã‚¹ãƒ†ãƒƒãƒ—ï¼š
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ç”¨æ„


cd ~/projects
mkdir dbt-sampling-template
cd dbt-sampling-template
Git åˆæœŸåŒ–ã—ã¦ã‚³ãƒŸãƒƒãƒˆ


git init
git add .
git commit -m "Initial commit: dbt sampling template"
GitHub ä¸Šã«ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œæˆï¼ˆä¾‹ï¼šdbt-sampling-templateï¼‰

https://github.com/new ã§ä½œæˆ

ã€ŒREADMEã€ã€Œ.gitignoreï¼ˆPython/DBTå‘ã‘ï¼‰ã€ã‚’è¿½åŠ ã—ã¦ã‚‚OK

ãƒªãƒ¢ãƒ¼ãƒˆã«ãƒ—ãƒƒã‚·ãƒ¥


git remote add origin https://github.com/<your-username>/dbt-sampling-template.git
git branch -M main
git push -u origin main
ğŸ ãŠã¾ã‘ï¼šREADME ã‚’ç”¨æ„ã™ã‚‹ã¨è¦ªåˆ‡

# dbt Sampling Template

## æ¦‚è¦
Snowflakeä¸Šã§ã®ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°åˆ†æç”¨ã®dbtãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã™ã€‚å¤‰æ•°ï¼ˆsampling_percentage, sampling_seedï¼‰ã‚’èª¿æ•´ã—ã¦æŸ”è»Ÿã«ãƒ†ã‚¹ãƒˆã§ãã¾ã™ã€‚

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ–¹æ³•
1. `profiles.yml` ã«æ¥ç¶šæƒ…å ±ã‚’è¨˜è¿°
2. `dbt deps`
3. `dbt run`
4. `dbt test`
5. `dbt docs generate && dbt docs serve`

## ç’°å¢ƒåˆ¥è¨­å®šï¼ˆä¾‹ï¼‰
- dev: 1%
- staging: 10%
- prod: 100%
